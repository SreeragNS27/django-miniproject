{% extends 'loginindex.html' %}
{% load static %}
{% block content %}

<h2 class="title">Book Appointment</h2>

<div class="appointment-form">
  <!-- Date selection form (GET) -->
  <form method="GET" class="form-group">
    <input type="date" name="date" value="{{ selected_date|date:'Y-m-d' }}" required onchange="this.form.submit()">
  </form>

  <!-- Appointment booking form (POST) -->
  <form method="POST">
    {% csrf_token %}

    <div class="form-group">
      <input type="text" name="name" placeholder="Full Name" required>
    </div>
    <div class="form-group">
      <input type="number" name="age" placeholder="Age" required>
    </div>
    <div class="form-group">
      <input type="email" name="email" placeholder="Email Address" required>
    </div>
    <div class="form-group">
      <input type="text" name="phone" placeholder="Phone Number" required>
    </div>

    <!-- Hidden field for date -->
    <input type="hidden" name="date" value="{{ selected_date|date:'Y-m-d' }}">

    <h3 class="subtitle">Available Time Slots</h3>
    <div class="slots">
      {% for s in slots %}
        {% if s.booked %}
          <button type="button" class="slot booked" disabled>
            {{ s.time|time:"g:i A" }}
          </button>
        {% else %}
          <label class="slot available">
            <input type="radio" name="time" value="{{ s.time|time:'H:i' }}" required>
            <span>{{ s.time|time:"g:i A" }}</span>
          </label>
        {% endif %}
      {% endfor %}
    </div>

    <button type="submit" class="btn-submit">Confirm Appointment</button>
  </form>
</div>

<style>
.title {
  text-align: center;
  font-size: 26px;
  margin: 20px 0;
  color: #333;
  font-weight: 600;
}
.subtitle {
  font-size: 18px;
  margin: 15px 0;
  color: #444;
  font-weight: 500;
}
.appointment-form {
  width: 500px;          
  max-width: 95%;       
  margin: 0 auto;
  background: #f9f9f9;
  padding: 30px 35px;
  border-radius: 16px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  gap: 15px;
}
.form-group input {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid #ccc;
  border-radius: 10px;
  font-size: 14px;
  outline: none;
  transition: border 0.3s;
  background: #fff;
}
.form-group input:focus {
  border-color: #00ad09;
  box-shadow: 0 0 6px rgba(0,173,9,0.2);
}
.slots {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
.slot {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 18px;
  border-radius: 10px;
  font-size: 14px;
  cursor: pointer;
  border: 1px solid #ddd;
  transition: 0.3s;
  font-weight: 500;
}
.slot input {
  display: none;
}
.slot.available {
  background: white;
  border: 1px solid #00ad09;
  color: #00ad09;
}
.slot.available:hover {
  background: #00ad09;
  color: white;
}
.slot.available input:checked + span {
  background: #00ad09;
  color: white;
  padding: 6px 12px;
  border-radius: 8px;
}
.slot.booked {
  background: #ddd;
  color: #666;
  border: none;
  cursor: not-allowed;
}
.btn-submit {
  background: #00ad09;
  color: white;
  padding: 14px;
  font-size: 16px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
  transition: 0.3s;
}
.btn-submit:hover {
  background: #008807;
}
</style>

{% endblock %}
